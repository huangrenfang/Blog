---
title: 进程
path: /browser
---

## 进程

> 一个进程就是一个程序的运行实例
>
> 详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程

### 为什么浏览器是多进程架构

- 进程中的任意一线程执行出错，都会导致整个进程的崩溃。
- 意外较多，可控性差。早期浏览器需要借助于插件来实现诸如 Web 视频、Web 游戏等各种强大的功能，但是插件是最容易出问题的模块，并且还运行在浏览器进程之中，所以一个插件的意外崩溃会引起整个浏览器的崩溃。
- 执行效率低下

### 进程与线程之间的特点

- 进程中的任意一线程执行出错，都会导致整个进程的崩溃。
- 线程之间共享进程中的数据。
- 当一个进程关闭之后，操作系统会回收进程所占用的内存。
  - 当一个进程退出时，操作系统会回收该进程所申请的所有资源；即使其中任意线程因为操作不当导致内存泄漏，当进程退出时，这些内存也会被正确回收
- 进程之间的内容相互隔离。（IPC 通信）
  - 管道（半双工通信，只能用于有亲缘关系的进程间通信，固定读写两端）
  - 消息队列
  - 信号量
  - 共享内存

### 单进程架构存在的问题

- 不稳定，单个线程出错会导致进程崩溃（插件带来的不稳定性因素）
- 执行效率低，无法并行执行
- 不安全（非沙箱环境）

### 多进程如何解决

- 拆分的进程中实现多线程执行，解决执行效率问题
- 进程间隔离，解决不稳定问题
- 引入沙箱机制，解决安全问题。
  - 沙箱里面的程序可以运行，但是不能在你的硬盘上写入任何数据，也不能在敏感位置读取任何数据。插件进程和渲染进程运行在沙箱环境里，因为插件进程和渲染进程和代码有最直接的交互。
